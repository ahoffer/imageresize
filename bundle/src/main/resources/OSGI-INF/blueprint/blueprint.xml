<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

  <!--Scope protoype does not create a new instance of the bean's class ??? -->
  <bean id="sampling" class="com.github.ahoffer.sizeimage.provider.SamplingSizer"/>

  <bean id="magick" class="com.github.ahoffer.sizeimage.provider.MagickSizer">
    <property name="configuration">
      <map>
        <entry key="pathToImageMagickExecutables" value="/opt/local/bin/"/>
        <entry key="outputFormat" value="png"/>
      </map>
    </property>
  </bean>
  <bean id="basic" class="com.github.ahoffer.sizeimage.provider.BasicSizer"/>
  <bean id="jpeg2000" class="com.github.ahoffer.sizeimage.provider.Jpeg2000Sizer"/>

  <service id="belittle" auto-export="all-classes">
    <bean class="com.github.ahoffer.sizeimage.provider.BeLittle">
      <property name="maxWidth" value="128"/>
      <property name="maxHeight" value="128"/>
      <property name="configuration">
        <map>
          <entry key="*">
            <list>
              <ref component-id="sampling"/>
              <ref component-id="magick"/>
              <ref component-id="basic"/>
            </list>
          </entry>
          <entry key="image/jp2">
            <list>
              <ref component-id="magick"/>
              <ref component-id="jpeg2000"/>
            </list>
          </entry>

          <!--Are these entries needed? Some sources say they are aliases for JPEG 200 MIME types-->
          <entry key="image/jpx">
            <list>
              <ref component-id="magick"/>
              <ref component-id="jpeg2000"/>
            </list>
          </entry>
          <entry key="image/jpm">
            <list>
              <ref component-id="magick"/>
              <ref component-id="jpeg2000"/>
            </list>
          </entry>
        </map>
      </property>
    </bean>
  </service>
</blueprint>